<main class="shell">
  <header class="hero">
    <h1>{{ title }}</h1>
    <p>Drag the pieces into place to complete the festive puzzle.</p>
  </header>

  <section class="board">
    <div class="game-wrapper">
      <div #gameHost class="game-host" aria-label="Puzzle board"></div>

      <button
        type="button"
        class="menu-toggle"
        (click)="toggleMenu()"
        aria-label="Toggle puzzle menu"
      >
        <span></span>
        <span></span>
        <span></span>
      </button>

      <nav *ngIf="menuOpen" class="mobile-menu" aria-label="Puzzle options">
        <button type="button" (click)="toggleDebug()">
          {{ showDebug ? 'Hide Guides' : 'Show Guides' }}
        </button>
        <button type="button" (click)="toggleGlassMode()">
          {{ useGlassStyle ? 'Opaque Pieces' : 'Glass Pieces' }}
        </button>
        <button type="button" (click)="closeMenu()">Close Menu</button>
      </nav>

      <div class="intro-overlay" *ngIf="showIntroOverlay">
        <div class="intro-card">
          <h1>{{ title }}</h1>
          <p>Drag the pieces into place to complete the festive puzzle.</p>
          <button type="button" (click)="startPuzzle()">Start Puzzle</button>
        </div>
      </div>

      <div class="complete-overlay" *ngIf="puzzleComplete">
        <div class="complete-card">
          <div *ngIf="coinTotal > 0">
            <h2>Du hast {{ coinTotal | number: '1.0-0' }} MÃ¼nzen gesammelt! ğŸ’°</h2>
            <p>MÃ¶chtest du sie an OH22 schicken?<br>
            Wir wandeln deinen hÃ¶chsten eingereichten Betrag in Euro um und spenden ihn an einen guten Zweck. â¤ï¸</p>
            <p>Oder willst du dein GlÃ¼ck noch einmal versuchen und noch mehr MÃ¼nzen sammeln? ğŸ§©âœ¨</p>
            <div class="complete-actions">
              <button type="button" *ngIf="!hideRestartButton" (click)="restartPuzzle()">Neues Spiel</button>
              <button type="button" (click)="donateCoins()">MÃ¼nzen senden</button>
            </div>
          </div>
          <div *ngIf="coinTotal === 0">
            <h2>ğŸ˜… Noch keine MÃ¼nzen gesammelt!</h2>
            <p>Diesmal hast du 0 MÃ¼nzen erreicht â€“ aber kein Grund zur Sorge! ğŸ’ª</p>
            <p>Vielleicht klapptâ€™s beim nÃ¤chsten Versuch besser.<br>
            Sammle MÃ¼nzen, schick sie an OH22, und wir wandeln deinen hÃ¶chsten Betrag in Euro um â€“<br>
            fÃ¼r einen guten Zweck! â¤ï¸</p>
            <p>Bereit fÃ¼r eine neue Runde? ğŸ§©âœ¨</p>
            <div class="complete-actions">
              <button type="button" *ngIf="!hideRestartButton" (click)="restartPuzzle()">Neues Spiel</button>
            </div>
          </div>
          <div class="complete-donation" *ngIf="donationMessageVisible">
            {{ coinTotal | number: '1.0-0' }} MÃ¼nzen fÃ¼r einen guten Zweck gespendet
          </div>
        </div>
      </div>

      <div class="stag-modal" *ngIf="showInitialContinueButton && !puzzleComplete">
        <div class="modal-content">
          <h1>... irgend etwas stimmt mit unserem Hirsch nicht!</h1>
          <button type="button" (click)="continueToPuzzle()">Weiter</button>
        </div>
      </div>

      <div class="explosion-modal" *ngIf="showExplosionModal && !puzzleComplete">
        <div class="modal-content">
          <h1>Oh nein â€“ unser oh22 Weihnachtshirsch ist zerfallen!</h1>
          <p>Hilf uns dabei, die 22 verstreuten Teile wieder zusammenzusetzen, damit unser Hirsch alle Weihnachtsgeschenke rechtzeitig verteilen kann.</p>
          <button type="button" (click)="closeExplosionModal()">Los geht's</button>
        </div>
      </div>
    </div>

        <p class="instruction-text" [class.visible]="showInstructions">Ziehe die Teile mit der Maus an die richtige Stelle.</p>

    <div class="desktop-controls">
      <button type="button" (click)="toggleDebug()">
        {{ showDebug ? 'Hide' : 'Show' }} Guides
      </button>
      <button type="button" (click)="toggleGlassMode()">
        {{ useGlassStyle ? 'Opaque Pieces' : 'Glass Pieces' }}
      </button>
    </div>
  </section>
</main>
